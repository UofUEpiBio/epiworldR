<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="epiworldR">
<title>Getting started with epiworldR • epiworldR</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Getting started with epiworldR">
<meta property="og:description" content="epiworldR">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">epiworldR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0-2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/getting-started.html">Getting started with epiworldR</a>
    <a class="dropdown-item" href="../articles/implementation.html">Implementation details of epiworldR</a>
    <a class="dropdown-item" href="../articles/run-multiple.html">Run Multiple</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/UofUEpiBio/epiworldR/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Getting started with epiworldR</h1>
                        <h4 data-toc-skip class="author">Derek
Meyer</h4>
                        <h4 data-toc-skip class="author">George Vega
Yon</h4>
            
            <h4 data-toc-skip class="date">2023-08-28</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/UofUEpiBio/epiworldR/blob/HEAD/vignettes/getting-started.Rmd" class="external-link"><code>vignettes/getting-started.Rmd</code></a></small>
      <div class="d-none name"><code>getting-started.Rmd</code></div>
    </div>

    
    
<p>epiworldR is an R package that provides a fast (C++ backend) and
highly- customizable framework for building network-based
transmission/diffusion agent- based models [ABM]. Some key features of
epiworldR are the ability to construct multi-virus models (e.g., models
of competing multi-pathogens/multi-rumor,) design mutating pathogens,
architect population-level interventions, and build models with an
arbitrary number of compartments/states (beyond SIR/SEIR.)</p>
<div class="section level2">
<h2 id="example-1-simulating-an-sir-model">Example 1: Simulating an SIR model<a class="anchor" aria-label="anchor" href="#example-1-simulating-an-sir-model"></a>
</h2>
<div class="section level3">
<h3 id="setup-and-running-the-model">Setup and running the model<a class="anchor" aria-label="anchor" href="#setup-and-running-the-model"></a>
</h3>
<p>This example implements a social network with parameters listed
within the <code>ModelSIRCONN</code> function. The virus name is
specified (COVID-19), 50000 agents are initialized, the virus prevalence
of 0.001 is declared, each agent will contact two others (contact_rate),
the transmission rate for any given agent is 0.3, and the recovery rate
is set to <span class="math inline">\(\frac{1}{3}\)</span>. To create
this model on epiworldR, simply use the <code>ModelSIRCONN</code>
function. From here, the example will take you through the basic
features of epiworldR.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/UofUEpiBio/epiworldR" class="external-link">epiworldR</a></span><span class="op">)</span></span>
<span><span class="va">model_sir</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ModelSIRCONN.html">ModelSIRCONN</a></span><span class="op">(</span></span>
<span>  name              <span class="op">=</span> <span class="st">"COVID-19"</span>,</span>
<span>  n                 <span class="op">=</span> <span class="fl">50000</span>, </span>
<span>  prevalence        <span class="op">=</span> <span class="fl">0.0001</span>, </span>
<span>  contact_rate      <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  transmission_rate <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  recovery_rate     <span class="op">=</span> <span class="fl">1</span><span class="op">/</span><span class="fl">3</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># Printing the model</span></span>
<span><span class="va">model_sir</span></span>
<span><span class="co">#&gt; ________________________________________________________________________________</span></span>
<span><span class="co">#&gt; Susceptible-Infected-Removed (SIR) (connected)</span></span>
<span><span class="co">#&gt; It features 50000 agents, 1 virus(es), and 0 tool(s).</span></span>
<span><span class="co">#&gt; The model has 3 states. The model hasn't been run yet.</span></span></code></pre></div>
<p>Printing the model shows us some information. Nevertheless, we can
extract detailed information using the summary method.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">model_sir</span><span class="op">)</span></span>
<span><span class="co">#&gt; ________________________________________________________________________________</span></span>
<span><span class="co">#&gt; ________________________________________________________________________________</span></span>
<span><span class="co">#&gt; SIMULATION STUDY</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Name of the model   : Susceptible-Infected-Removed (SIR) (connected)</span></span>
<span><span class="co">#&gt; Population size     : 50000</span></span>
<span><span class="co">#&gt; Agents' data        : (none)</span></span>
<span><span class="co">#&gt; Number of entities  : 0</span></span>
<span><span class="co">#&gt; Days (duration)     : 0 (of 0)</span></span>
<span><span class="co">#&gt; Number of viruses   : 1</span></span>
<span><span class="co">#&gt; Last run elapsed t  : -</span></span>
<span><span class="co">#&gt; Rewiring            : off</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Global actions:</span></span>
<span><span class="co">#&gt;  (none)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Virus(es):</span></span>
<span><span class="co">#&gt;  - COVID-19 (baseline prevalence: 0.01%)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Tool(s):</span></span>
<span><span class="co">#&gt;  (none)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Model parameters:</span></span>
<span><span class="co">#&gt;  - Contact rate      : 2.0000</span></span>
<span><span class="co">#&gt;  - Recovery rate     : 0.3333</span></span>
<span><span class="co">#&gt;  - Transmission rate : 0.5000</span></span></code></pre></div>
<p>First, the name of the model, population size, number of entities
(think of these as public spaces in which agents can make social contact
with one another), the duration in days, number of viruses, amount of
time the last replicate took to run (last run elapsed t), and rewiring
status (on or off). The model also includes a list of global actions
(interventions) that are called during the model run. Next, you will see
a list of the viruses used in the model. In this case, COVID-19 was the
only virus used. Note that epiworldR can include more than one virus in
a model. Tool(s) lists agents’ tools to fight the virus. Examples of
this may include masking, vaccines, social distancing, etc. In this
model, no tools are specified. Lastly, model parameters are listed.</p>
<p>To execute the model, use the run function with the SIR model object,
the number of simulation days, and an optional seed for reproducibility.
Next, print out the results from the simulated model using
model_sir.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/epiworld-methods.html">run</a></span><span class="op">(</span><span class="va">model_sir</span>, ndays <span class="op">=</span> <span class="fl">50</span>, seed <span class="op">=</span> <span class="fl">1912</span><span class="op">)</span></span>
<span><span class="co">#&gt; _________________________________________________________________________</span></span>
<span><span class="co">#&gt; |Running the model...</span></span>
<span><span class="co">#&gt; |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||| done.</span></span>
<span><span class="co">#&gt; | done.</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">model_sir</span><span class="op">)</span></span>
<span><span class="co">#&gt; ________________________________________________________________________________</span></span>
<span><span class="co">#&gt; ________________________________________________________________________________</span></span>
<span><span class="co">#&gt; SIMULATION STUDY</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Name of the model   : Susceptible-Infected-Removed (SIR) (connected)</span></span>
<span><span class="co">#&gt; Population size     : 50000</span></span>
<span><span class="co">#&gt; Agents' data        : (none)</span></span>
<span><span class="co">#&gt; Number of entities  : 0</span></span>
<span><span class="co">#&gt; Days (duration)     : 50 (of 50)</span></span>
<span><span class="co">#&gt; Number of viruses   : 1</span></span>
<span><span class="co">#&gt; Last run elapsed t  : 396.00ms</span></span>
<span><span class="co">#&gt; Last run speed      : 6.30 million agents x day / second</span></span>
<span><span class="co">#&gt; Rewiring            : off</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Global actions:</span></span>
<span><span class="co">#&gt;  (none)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Virus(es):</span></span>
<span><span class="co">#&gt;  - COVID-19 (baseline prevalence: 0.01%)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Tool(s):</span></span>
<span><span class="co">#&gt;  (none)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Model parameters:</span></span>
<span><span class="co">#&gt;  - Contact rate      : 2.0000</span></span>
<span><span class="co">#&gt;  - Recovery rate     : 0.3333</span></span>
<span><span class="co">#&gt;  - Transmission rate : 0.5000</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Distribution of the population at time 50:</span></span>
<span><span class="co">#&gt;   - (0) Susceptible : 49995 -&gt; 3364</span></span>
<span><span class="co">#&gt;   - (1) Infected    :     5 -&gt; 0</span></span>
<span><span class="co">#&gt;   - (2) Recovered   :     0 -&gt; 46636</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Transition Probabilities:</span></span>
<span><span class="co">#&gt;  - Susceptible  0.95  0.05  0.00</span></span>
<span><span class="co">#&gt;  - Infected     0.00  0.64  0.36</span></span>
<span><span class="co">#&gt;  - Recovered    0.00  0.00  1.00</span></span></code></pre></div>
<p>There are two additional sections included in the summary after
running the model. First, we see the distribution of the population at
time 50. This section describes the flow of agents from each state (SIR)
after 50 days. In the example, you’ll see the number of agents in the
susceptible state decreased from 49,995 to 3,364, the number of agents
in the infected state increased from 5 to 0, and recovered agents
increased to 46,636 after 50 days. The counts for these states will
change based on model parameters or simulation run-time. The
transmission probabilities section outputs a 3x3 matrix that describes
the probability of moving from one state to another. For example, in the
susceptible row, each agent has a 0.95 probability of remaining in the
susceptible state with a 0.05 probability of moving from the susceptible
state to the infected state. Notice there is no chance of skipping
states. In other words, an agent can’t jump from the susceptible state
to the recovered state; that agent must pass through the infected state
to progress to the recovered state. The same logic applies to moving
backward; an agent cannot become susceptible again after infection.</p>
</div>
<div class="section level3">
<h3 id="plot">Plot<a class="anchor" aria-label="anchor" href="#plot"></a>
</h3>
</div>
<div class="section level3">
<h3 id="extracting-information">Extracting information<a class="anchor" aria-label="anchor" href="#extracting-information"></a>
</h3>
<p>After running the epiworldR model, below is a list of all the
functions that can be called using the epiworld model object.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/methods.html" class="external-link">methods</a></span><span class="op">(</span>class <span class="op">=</span> <span class="st">"epiworld_model"</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] add_tool_n                 add_tool                  </span></span>
<span><span class="co">#&gt;  [3] add_virus_n                add_virus                 </span></span>
<span><span class="co">#&gt;  [5] agents_from_edgelist       agents_smallworld         </span></span>
<span><span class="co">#&gt;  [7] get_hist_tool              get_hist_total            </span></span>
<span><span class="co">#&gt;  [9] get_hist_transition_matrix get_hist_virus            </span></span>
<span><span class="co">#&gt; [11] get_n_replicates           get_n_tools               </span></span>
<span><span class="co">#&gt; [13] get_n_viruses              get_name                  </span></span>
<span><span class="co">#&gt; [15] get_ndays                  get_param                 </span></span>
<span><span class="co">#&gt; [17] get_reproductive_number    get_states                </span></span>
<span><span class="co">#&gt; [19] get_today_total            get_transition_probability</span></span>
<span><span class="co">#&gt; [21] get_transmissions          print                     </span></span>
<span><span class="co">#&gt; [23] queuing_off                queuing_on                </span></span>
<span><span class="co">#&gt; [25] run_multiple               run                       </span></span>
<span><span class="co">#&gt; [27] set_name                   set_param                 </span></span>
<span><span class="co">#&gt; [29] size                       summary                   </span></span>
<span><span class="co">#&gt; [31] verbose_off                verbose_on                </span></span>
<span><span class="co">#&gt; see '?methods' for accessing help and source code</span></span></code></pre></div>
<p>To demonstrate, start with the basic plot and get_hist_total
functions.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">model_sir</span><span class="op">)</span></span></code></pre></div>
<p><img src="getting-started_files/figure-html/unnamed-chunk-2-1.png" width="80%" style="display: block; margin: auto;"></p>
<p>As evident from the above plot, the SIR model constructed from
epiworldR displays the changes in susceptible, infected, and recovered
case counts over time (days). Notice after a certain amount of time, the
curves flatten. Below, a table representation of the above plot is
printed, complete with each state within the SIR model, date, and agent
counts.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="../reference/epiworld-data.html">get_hist_total</a></span><span class="op">(</span><span class="va">model_sir</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;   date       state counts</span></span>
<span><span class="co">#&gt; 1    0 Susceptible  49995</span></span>
<span><span class="co">#&gt; 2    0    Infected      5</span></span>
<span><span class="co">#&gt; 3    0   Recovered      0</span></span>
<span><span class="co">#&gt; 4    1 Susceptible  49991</span></span>
<span><span class="co">#&gt; 5    1    Infected      9</span></span>
<span><span class="co">#&gt; 6    1   Recovered      0</span></span></code></pre></div>
<p>An essential statistic in epidemiological models is the reproductive
number:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">repnum</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/epiworld-data.html">get_reproductive_number</a></span><span class="op">(</span><span class="va">model_sir</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">repnum</span><span class="op">)</span></span>
<span><span class="co">#&gt;   virus_id    virus source source_exposure_date rt</span></span>
<span><span class="co">#&gt; 1        0 COVID-19  23811                   44  0</span></span>
<span><span class="co">#&gt; 2        0 COVID-19  38232                   42  1</span></span>
<span><span class="co">#&gt; 3        0 COVID-19  19769                   41  1</span></span>
<span><span class="co">#&gt; 4        0 COVID-19  28486                   40  0</span></span>
<span><span class="co">#&gt; 5        0 COVID-19   6422                   39  0</span></span>
<span><span class="co">#&gt; 6        0 COVID-19   7907                   39  0</span></span></code></pre></div>
<p>epiworldR has a method to plot the reproductive number automatically.
The function takes the average of values in the above table for each
date and repeats until all data have been accounted for.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">repnum</span>, type <span class="op">=</span> <span class="st">"b"</span><span class="op">)</span></span></code></pre></div>
<p><img src="getting-started_files/figure-html/unnamed-chunk-3-1.png" width="80%" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">date</span> <span class="op">==</span> <span class="fl">10</span><span class="op">)</span> <span class="co"># Reproductive number on day 10</span></span>
<span><span class="co">#&gt;    virus_id    virus date      avg   n       sd lb    ub</span></span>
<span><span class="co">#&gt; 11        0 COVID-19   10 2.450464 646 2.263946  0 7.875</span></span></code></pre></div>
<p>Another typical piece of information is the daily incidence. This is
the number of new cases per day. In epiworldR, we can get the incidence
by looking at the daily transitions between states. Although the
function <code>get_hist_transition_matrix</code> provides the desired
data, the function <code>plot_incidence</code> is a nice wrapper for
visualizing the data:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/epiworld-data.html">plot_incidence</a></span><span class="op">(</span><span class="va">model_sir</span><span class="op">)</span></span></code></pre></div>
<p><img src="getting-started_files/figure-html/unnamed-chunk-4-1.png" width="80%" style="display: block; margin: auto;"></p>
</div>
<div class="section level3">
<h3 id="adding-more-virusesviruses">Adding more viruses/viruses<a class="anchor" aria-label="anchor" href="#adding-more-virusesviruses"></a>
</h3>
<p>epiworldR supports multi-virus models. The below code gives
instructions on how to implement this. Using the <code>virus</code>
function, give a name to the new virus/virus with its corresponding
probability of infecting any given agent. In this example,
<code>prob_infecting</code> is set to 1.0, making it highly contagious.
To officially add this new virus to the model, use the
<code>add_virus</code> function by calling the original epiworldR model
object, the new virus, and the new virus’ prevalence (which is set to
0.01 in this example).</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Building the virus</span></span>
<span><span class="va">flu</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/virus.html">virus</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"Flu"</span>, prob_infecting <span class="op">=</span> <span class="fl">.3</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Adding the virus to the model</span></span>
<span><span class="fu"><a href="../reference/virus.html">add_virus</a></span><span class="op">(</span><span class="va">model_sir</span>, <span class="va">flu</span>, <span class="fl">.0001</span><span class="op">)</span></span></code></pre></div>
<p>After running the updated model with the new virus included for 50
days, the output below describes the simulation. To confirm that the flu
is included, notice the presence of “Flu” in the Virus(es) section of
the output. All other output is interpretable as specified in previous
sections.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/epiworld-methods.html">run</a></span><span class="op">(</span><span class="va">model_sir</span>, ndays <span class="op">=</span> <span class="fl">50</span>, seed <span class="op">=</span> <span class="fl">1912</span><span class="op">)</span></span>
<span><span class="co">#&gt; _________________________________________________________________________</span></span>
<span><span class="co">#&gt; |Running the model...</span></span>
<span><span class="co">#&gt; |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||| done.</span></span>
<span><span class="co">#&gt; | done.</span></span>
<span><span class="va">model_sir</span></span>
<span><span class="co">#&gt; ________________________________________________________________________________</span></span>
<span><span class="co">#&gt; Susceptible-Infected-Removed (SIR) (connected)</span></span>
<span><span class="co">#&gt; It features 50000 agents, 2 virus(es), and 0 tool(s).</span></span>
<span><span class="co">#&gt; The model has 3 states.</span></span>
<span><span class="co">#&gt; The final distribution is: 3264 Susceptible, 4 Infected, and 46732 Recovered.</span></span></code></pre></div>
<p>Plotting the previous model (including the flu) yields the following.
Notice the presence of two reproductive numbers plotted over time.
Variant 0 refers to COVID-19, and virus 1 refers to the flu.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">repnum2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/epiworld-data.html">get_reproductive_number</a></span><span class="op">(</span><span class="va">model_sir</span><span class="op">)</span></span>
<span></span>
<span><span class="va">op</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mfrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">model_sir</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">repnum2</span>, type<span class="op">=</span><span class="st">"b"</span><span class="op">)</span></span></code></pre></div>
<p><img src="getting-started_files/figure-html/unnamed-chunk-6-1.png" width="80%" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span><span class="va">op</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="tools">Tools<a class="anchor" aria-label="anchor" href="#tools"></a>
</h3>
<p>Now, the implementation of tools to combat any viruses and viruses in
the model will be demonstrated. First, for the sake of simplicity,
remove the flu virus from the SIR model object (keep in mind the index
for the flu virus in the model object is 1). Next, provide parameters
for the new tool using the <code>tool</code> function. These parameters
include the name of the tool, any reduction in probabilities for the SIR
model parameters, and increased probability of recovery option. In order
to add the tool to the SIR model, use the <code>add_tool</code> function
with the SIR model object, new tool, and prevalence of the tool. In this
example, assume that 85% of the population will have received the
vaccination.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Removing the flu virus from the model</span></span>
<span><span class="fu"><a href="../reference/virus.html">rm_virus</a></span><span class="op">(</span><span class="va">model_sir</span>, <span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="va">vaccine</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tool.html">tool</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"Vaccine"</span>,</span>
<span>  susceptibility_reduction <span class="op">=</span> <span class="fl">.9</span>,</span>
<span>  transmission_reduction <span class="op">=</span> <span class="fl">.5</span>,</span>
<span>  recovery_enhancer <span class="op">=</span> <span class="fl">.5</span>, </span>
<span>  death_reduction <span class="op">=</span> <span class="fl">.9</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/tool.html">add_tool</a></span><span class="op">(</span><span class="va">model_sir</span>, <span class="va">vaccine</span>, <span class="fl">0.5</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/epiworld-methods.html">run</a></span><span class="op">(</span><span class="va">model_sir</span>, ndays <span class="op">=</span> <span class="fl">50</span>, seed <span class="op">=</span> <span class="fl">1231</span><span class="op">)</span></span>
<span><span class="co">#&gt; _________________________________________________________________________</span></span>
<span><span class="co">#&gt; |Running the model...</span></span>
<span><span class="co">#&gt; |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||| done.</span></span>
<span><span class="co">#&gt; | done.</span></span></code></pre></div>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">repnum3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/epiworld-data.html">get_reproductive_number</a></span><span class="op">(</span><span class="va">model_sir</span><span class="op">)</span></span>
<span></span>
<span><span class="va">op</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mfrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/epiworld-data.html">plot_incidence</a></span><span class="op">(</span><span class="va">model_sir</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">repnum3</span>, type<span class="op">=</span><span class="st">"b"</span><span class="op">)</span></span></code></pre></div>
<p><img src="getting-started_files/figure-html/curves-including-vaccine-1.png" width="80%" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span><span class="va">op</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Derek Meyer, George Vega Yon, Centers for Disease Control and Prevention.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
